<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <title></title>
</head>

<body style="font-size:10pt;font-family:Sans">
<h1 style="text-align:center;margin-left:auto;margin-right:auto;">med_stat -
L'outil d'extraction de données de la suite MedinTux</h1>
<ul>
  <li><a href="#Connexion">Connexion utilisateur</a></li>
  <li><a href="#travail">Fenêtre de travail</a> 
    <ul>
      <li><a href="#L1603">Création des requêtes</a> 
        <ul>
          <li><a href="#Choisir">Choisir la date</a></li>
          <li><a href="#Requ">Requêtes SQL</a></li>
          <li><a href="#Enregistre">Enregistrement de la requête et chargement
            d'une requête enregistrée</a></li>
          <li><a href="#Plus">Plus loin dans les requêtes SQL</a></li>
          <li><a href="#Encore">Encore plus loin dans les requêtes : les
            méta-champs</a> 
            <ul>
              <li><a href="#L3617">Création d'un méta-champ</a></li>
              <li><a href="#Exploitati">Exploitation du méta-champ en tant que
                méta-filtre</a><a href="#Classes"></a></li>
            </ul>
          </li>
          <li><a href="#Classes">Classes de dénombrements</a></li>
          <li><a href="#Test">Test validant</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p><span style="font-weight:600"></span><br />
<br />
La suite MedinTux permet de faire des extractions de données grâce à un
outil graphique dédié nommé med_stat.<br />
<br />
<em><strong>Avertissement</strong></em><br />
Cette documentation décrit une version de med_stat encore incomplète. elle
fournit néanmoins à ce stade des fonctionnalités intéressantes.<br />
<br />
</p>

<h2 id="Connexion">Connexion utilisateur</h2>

<p><br />
<img src="login.png" alt="capture" /><br />
<br />
Suivant la même règle que Manager, les utilisateurs listés ici sont les
utilisateurs signataires (droit sgn dans gest_user).</p>

<h2 id="travail">Fenêtre de travail</h2>

<p><br />
En cliquant sur les flèches situées à gauche des utilisateurs signataires,
on peut accéder aux utilisateurs délégués.<br />
Une fois connecté, voici la fenêtre de travail. (Notez que la liste des
utilisateurs a été fermée pour laisser plus de place au travail - Si vous
vouliez la réafficher, cliquez du bouton droit de la souris n'importe où dans
la ligne en haut de la fenêtre, où est écrit Fichier).<br />
<br />
<img src="med_stat_initial.png" alt="capture" /><br />
Pour le moment, tous les espaces sont vides, ce qui est bien normal, puisque
nous n'avons encore rien demandé.<br />
</p>

<h3 id="L1603">Création des requêtes</h3>

<p><br />
</p>

<h4 id="Choisir">Choisir la date</h4>

<p><br />
Pour lancer une recherche dans les dossiers, choisissons d'abord les limites de
dates au moyen des quatre zones d'horodatage présentes au-dessus de la zone
des dossiers retenus.<br />
Vous pouvez aussi bien faire les modifications à la main directement dans les
zones de saisie qu'au moyen de calendriers accessibles par les petites flèches
oranges.<br />
<br />
<img src="med_stat_date.png" alt="capture" /><br />
Le mode d'emploi de ce calendrier est un peu particulier :<br />
commencez par choisir l'heure en cliquant sur une heure et sur une minute dans
les couronnes de droite<br />
choisissez ensuite un mois et une année si nécessaire dans les listes
déroulantes en haut à gauche<br />
terminez en cliquant sur un jour : l'horodatage sera automatiquement inséré
dans les zones prévues.<br />
<br />
Une fois choisies une date de début et de fin encadrant une période
d'activité, il suffit de cliquer sur le bouton en bas à gauche Démarrer les
statistiques pour voir une liste s'afficher dans la colonne <br />
<img src="" alt="capture" /><br />
<br />
Vous venez donc de trouver la liste des patients qui ont eu une consultation
durant la période étudiée.<br />
Notez que cette liste ne tient pas compte de la notion d'utilisateur. N'importe
quel utilisateur habilité peut effectuer des statistiques sur l'ensemble des
utilisateurs.<br />
Chacun de ces noms trouvés permet de lancer le dossier correspondant en
faisant un double clic dessus. Bien évidemment, les droits utilisés seront
ceux de l'utilisateur qui a lancé med_stat.</p>

<h4 id="Requ">Requêtes SQL</h4>

<p><br />
<br />
Si vous êtes observateur, vous avez pu noter que la zone en haut à droite de
la fenêtre, titrée Requête SQL générée, s'est remplie d'une formule
susceptible d'impressionner les moins téméraires, et qui n'est rien d'autre
qu'une requête SQL.<br />
<br />
Si vous n'êtes pas familier avec le SQL, sachez que MedinTux stocke ses
données dans un serveur SQL, où il va ensuite les chercher selon un langage
normalisé.<br />
<br />
<br />
Dans ce cas, la requête se présente comme suit :<br />
SELECT * FROM RubriquesHead INNER JOIN IndexNomPrenom ON
RubriquesHead.RbDate_IDDos=IndexNomPrenom.FchGnrl_IDDos INNER JOIN fchpat ON
RubriquesHead.RbDate_IDDos=fchpat.FchPat_GUID_Doss INNER JOIN RubriquesBlobs ON
RubriquesHead.RbDate_RefBlobs_PrimKey=RubriquesBlobs.RbDate_PrimKey WHERE
RbDate_Date &gt;= '20110518000000' AND RbDate_Date&lt;= '20110519080000' ORDER
BY RubriquesHead.RbDate_IDDos ;<br />
<br />
Si vous n'avez pas le temps ou la compétence pour écrire cette formule,
med_stat l'a écrite à votre place.<br />
<br />
Notez que c'est cette fenêtre qui fait foi. Si vous y modifiez quelque chose
et que vous relancez les statistiques, le nouveau résultat en tiendrait
compte.<br />
<br />
Notez aussi que cette fenêtre tient compte dynamiquement des modifications
faites dans les autres zones (dates, filtres SQL).<br />
<br />
</p>

<h4 id="Enregistre">Enregistrement de la requête et chargement d'une requête
enregistrée</h4>

<p><br />
En cliquant sur le bouton Enregistrer, votre requête sera enregistrée dans un
fichier de texte situé dans Programmes/med_stat/bin/Modeles par défaut. Il ne
vous reste qu'à lui donner un nom descriptif, voir à la la stocker dans un
dossier hiérarchique astucieusement choisi.<br />
<br />
Si vous cliquez sur Charger, vous pouvez retrouver votre requête, voire
charger une requête fournie par MedinTux comme modèle.<br />
<br />
</p>

<h4 id="Plus">Plus loin dans les requêtes SQL</h4>

<p></p>

<p>La zone Filtre de sélection SQL des dossiers à inclure dans l'analyse<br />
Jusqu'à maintenant, nous avons généré une requête qui ne fait rien d'autre
que répertorier les patients vus durant une certaine plage d'horodatage.<br />
Imaginons que nous voulions affiner la recherche en fonction de critères comme
le nom, la date de naissance, l'adresse, etc., <br />
Nous allons rallonger notre requête en y introduisant des critères
restrictifs grâce à l'assistant de la zone Filtre de sélection SQL...<br />
Cliquons sur le +<br />
Vous verrez deux choses se produire :<br />
une ligne commençant par une parenthèse apparaît dans la zone Filtre...<br />
la requête SQL vient de s'allonger d'un début de condition : AND (`<br />
<br />
Nous allons remplir ce AND pour qu'il affine notre requête. Cliquons sous la
colonne Champ avec le bouton droit de la souris. Nous voyons apparaître de
nombreuses propositions, correspondant à des valeurs stockées dans MedinTux.
Leur nom devrait être assez explicite.<br />
<img src="med_stat_select_champ.png" alt="capture" /><br />
Par exemple, nous allons limiter notre requête aux patients vus par
l'utilisateur delafond.<br />
Nous cliquons ensuite du bouton droit sous Opérateur, et nous choisissons est
égal, puis sous valeur, et nous écrivons delafond (en majuscules ou
minuscules : cela n'a pas d'importance) dans la boîte de dialogue.<br />
Afin que notre requête puisse s'exécuter, nous devons clore la parenthèse.
Pour cela, nous cliquons une nouvelle fois sur +, et nous choisissons la
parenthèse fermante.<br />
<img src="med_stat_requete_user.png" alt="capture" /><br />
Nous constatons que la requête s'est bien allongée, permettant de n'afficher
que les patients vus par ce praticien et pas par les autres.<br />
Pour ajouter une deuxième condition, nous devons enlever la parenthèse
fermante, en cliquant sur l'icône - en ayant préalablement cliqué sur la
ligne contenant cette parenthèse, puis ajouter un <code>et</code> ou un
<code>ou</code> pour introduire une deuxième ligne. Par exemple, nous allons
restreindre notre requête aux personnes de sexe masculin :<br />
<br />
<img src="med_stat_requete_sexe.png" alt="capture" /><br />
<br />
La liste des résultats n'affichera que des patients à prénom masculin, ce
qui prouve la réussite de l'opération.<br />
<br />
Notez que vous auriez pu procéder autrement, en ajoutant le et/ou en début de
deuxième ligne au lieu de le mettre en fin de première ligne :<br />
<img src="med_stat_requete_sexe1.png" alt="capture" /><br />
<br />
Vous constatez que les requêtes ne diffèrent que par quelques parenthèses de
plus, ce qui ne change rien dans ce cas, mais qui peut servir si vous commencez
à combiner des et et des ou.<br />
<img src="med_stat_requete_sexe2.png" alt="capture" /><br />
<br />
Cette requête permet de trouver les patients vus durant la période par le
praticien delafond, et qui sont soit de sexe masculin, soit se prénomment
Antoinette.<br />
<br />
</p>

<h4 id="Encore">Encore plus loin dans les requêtes : les méta-champs</h4>

<p><br />
Préambule<br />
Vous avez pu constater que ces requêtes sont, certes, faciles à générer,
mais ne sont d'aucun intérêt médical.<br />
En effet, MedinTux a choisi une politique de stockage des données assez
différente des logiciels les plus courants.<br />
Là où les logiciels de données ont tendance à multiplier les champs
(tension, poids, taille, pouls, etc.), MedinTux stocke tout "en vrac".<br />
Cela a deux avantages :<br />
-ne pas compliquer la base à l'infini<br />
-pouvoir s'adapter aux besoins de l'utilisateur à volonté<br />
<br />
En revanche, cela complique la recherche d'informations précises. C'est
cependant possible.<br />
<br />
Comment cela fonctionne-t-il ?<br />
MedinTux utilise le texte lui-même comme balises de structure.<br />
Par exemple, si vous cherchez tout ce qui correspond à la zone de texte
suivant <samp>Motif</samp> : des observations, il suffira de cherche dans le
champ d'observation le texte situé entre la chaîne "Motif :" et la fin de
ligne.<br />
Exemple de recherche par méta-champ<br />
Nous allons chercher la chaîne de caractères "chronique" sur la ligne
Motif.<br />
<br />
<a name="L3617" id="L3617">Création d'un méta-champ</a><br />
<img src="med_stat_meta_champ.png" alt="capture" /><br />
Nous avons simplement cliqué sur le + de la zone Définition des
Méta-champs.<br />
Le nom est un descriptif que vous choisirez, mais vous pouvez aussi bien
laisser le nom par défaut Méta_champ_1<br />
Vous choisissez dans le déroulant si la recherche doit se faire dans
l'observation, l'ordonnance, etc. Notez que, si vous choisissez le Terrain,
vous pourrez faire des recherches dans les tableaux de variables aussi
facilement.<br />
La syntaxe d'extraction vous permet de choisir entre une recherche dans une
ligne, une recherche entre deux balises que vous définissez ou une recherche
textuelle.<br />
Attention ! Pour que vos balises soient bien prises, il faut les valider par la
touche Entrée. La chaîne servant de balise doit apparaître entre les
parenthèses dans la définition du méta-champ.<br />
Notez aussi que cette recherche est sensible à la casse (tient compte des
majuscules/minuscules).<br />
<br />
<a name="Exploitati" id="Exploitati">Exploitation du méta-champ en tant que
méta-filtre</a><br />
Une fois notre méta-champ défini, intéressons-nous à la zone Méta-filtre
des dossiers à inclure dans l'analyse :<br />
le mécanisme est exactement le même que pour la définition des champs SQL :
parenthèse de début et de fin, type de recherche (égal, contient, etc.), que
vous trouvez au bouton droit de la souris.<br />
<img src="med_stat_meta_filtre.png" alt="capture" /><br />
La colonne Type permet de jouer sur la recherche tenant compte des majuscules
ou des minuscules, ainsi que les valeurs de type numérique ou date-heure.<br />
De la même manière que pour les requêtes SQL combinées, vous pouvez cumuler
plusieurs conditions (ex: "et diagnostic ne contient pas diabète").<br />
<br />
En créant plusieurs méta-champs et en y associant des méta-filtres, il est
facile d'obtenir des dossiers répondant à un profil assez précis.<br />
<br />
Vous noterez que ces filtres supplémentaires n'apparaissent pas dans la
définition de la requête SQL. en revanche, ils sont enregistrés avec elle
lorsque vous cliquez sur Enregistrer.<br />
<br />
Onglet Dossiers rejetés<br />
En cliquant sur cet onglet, vous trouverez les dossiers et documents ne
correspondant pas à la requête combinée (SQL + méta-filtre).<br />
<br />
</p>

<h4 id="Classes">Classes de dénombrements</h4>

<p><br />
<img src="med_stat_classe_denombrement.png" alt="capture" /><br />
<br />
Dans cet exemple, nous voulons savoir combien de patients provenant des
différentes villes répondent aux critères recherchés.<br />
Le résultat se trouve dans l'onglet Résultats<br />
<img src="med_stat_resultat.png" alt="capture" /><br />
Notez que vous pouvez aussi intégrer les méta-filtres, situés en bas de
liste dans le déroulant. dans l'exemple ci-dessus, nous avons introduit une
classe motif basée sur le méta-champ motif, avec un méta-filtre sur aigu.<br
/>
<br />
</p>

<h4 id="Test">Test validant</h4>

<p><br />
Chaque classe de dénombrement peut être associée à un test décrit dans le
panneau du dessous<br />
Pour cela, sélectionner une classe de dénombrement en cliquant dessus, puis
cliquez du bouton droit dans une colonne du panneau du bas de la fenêtre<br />
<img src="med_stat_test_validant.png" alt="capture" /><br />
Normalement, cela devrait changer quelque chose.<br />
Notez que les boutons +,- et tout effacer n'ont aucun effet dans ce panneau.<br
/>
<br />
<br />
<br />
</p>
</body>
</html>
